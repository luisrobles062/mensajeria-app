{% extends "base.html" %}

{% block title %}Despachar guías{% endblock %}

{% block content %}
  <h2>Despachar guías</h2>

  <form method="post" action="{{ url_for('despachar_guias') }}">
    <label>Guía (pendientes):</label>
    <select name="numero_guia" required {{ 'disabled' if not guias }}>
      <option value="">-- seleccionar --</option>
      {% for g in guias %}
        <option value="{{ g }}">{{ g }}</option>
      {% endfor %}
    </select>
    {% if not guias %}
      <p class="hint">No hay guías pendientes para despachar.</p>
    {% endif %}
    <br>

    <label>Mensajero:</label>
    <select name="mensajero" required {{ 'disabled' if not mensajeros }}>
      <option value="">-- seleccionar --</option>
      {% for m in mensajeros %}
        <option value="{{ m }}">{{ m }}</option>
      {% endfor %}
    </select>
    {% if not mensajeros %}
      <p class="hint">No hay mensajeros registrados. Registra uno primero.</p>
    {% endif %}
    <br>

    <button type="submit" {{ 'disabled' if not (guias and mensajeros) }}>Despachar</button>
  </form>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      <div id="flash">
        {% for category, message in messages %}
          <div class="flash {{ category }}">{{ message }}</div>
        {% endfor %}
      </div>
    {% endif %}
  {% endwith %}
{% endblock %}
