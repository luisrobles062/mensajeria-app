{% extends "base.html" %}
{% block title %}Registrar Recepción - CERTISERVI{% endblock %}
{% block content %}
<h2>Registrar Recepción (Entrega o Devolución)</h2>
<form method="POST">
    <div class="mb-3">
        <label for="numero_guia" class="form-label">Número de Guía</label>
        <input type="text" class="form-control" id="numero_guia" name="numero_guia" required />
    </div>
    <div class="mb-3">
        <label for="tipo_evento" class="form-label">Tipo de Evento</label>
        <select id="tipo_evento" name="tipo_evento" class="form-select" required onchange="mostrarMotivo(this.value)">
            <option value="" selected disabled>Seleccione tipo de evento</option>
            <option value="ENTREGA">Entrega</option>
            <option value="DEVOLUCION">Devolución</option>
        </select>
    </div>
    <div class="mb-3" id="motivo_div" style="display:none;">
        <label for="motivo" class="form-label">Motivo de Devolución</label>
        <select id="motivo" name="motivo" class="form-select">
            <option value="" selected disabled>Seleccione motivo</option>
            <option value="INCORRECTA">Incorrecta</option>
            <option value="INCOMPLETA">Incompleta</option>
            <option value="REHUSADO">Rehusado</option>
            <option value="CERRADO">Cerrado</option>
            <option value="TRASLADO">Traslado</option>
        </select>
    </div>
    <button type="submit" class="btn btn-primary">Registrar</button>
    <a href="{{ url_for('index') }}" class="btn btn-secondary ms-2">Volver al Inicio</a>
</form>

<script>
function mostrarMotivo(tipo) {
    if(tipo === 'DEVOLUCION') {
        document.getElementById('motivo_div').style.display = 'block';
        document.getElementById('motivo').required = true;
    } else {
        document.getElementById('motivo_div').style.display = 'none';
        document.getElementById('motivo').required = false;
    }
}
</script>
{% endblock %}
