{% extends "base.html" %}
{% block title %}Registrar Recepción - CERTISERVI{% endblock %}
{% block content %}
<h2>Registrar Recepción de Guía</h2>

<form action="/registrar_recepcion" method="POST" class="mt-4">
    <div class="mb-3">
        <label for="numero_guia" class="form-label">Número de Guía</label>
        <input type="text" name="numero_guia" id="numero_guia" class="form-control" required>
    </div>
    <div class="mb-3">
        <label for="estado" class="form-label">Tipo de Evento</label>
        <select name="estado" id="estado" class="form-select" required>
            <option value="ENTREGADA">Entrega</option>
            <option value="DEVUELTA">Devolución</option>
        </select>
    </div>
    <div class="mb-3" id="motivo-container" style="display:none;">
        <label for="motivo" class="form-label">Motivo de Devolución</label>
        <select name="motivo" id="motivo" class="form-select">
            <option value="">Seleccione motivo</option>
            <option value="INCORRECTA">Incorrecta</option>
            <option value="INCOMPLETA">Incompleta</option>
            <option value="REHUSADO">Rehusado</option>
            <option value="CERRADO">Cerrado</option>
            <option value="TRASLADO">Traslado</option>
        </select>
    </div>
    <button type="submit" class="btn btn-primary">Registrar Recepción</button>
    <a href="/" class="btn btn-secondary ms-2">Volver al Inicio</a>
</form>

<script>
document.getElementById("estado").addEventListener("change", function(){
    const motivoCont = document.getElementById("motivo-container");
    if(this.value === "DEVUELTA"){
        motivoCont.style.display = "block";
    } else {
        motivoCont.style.display = "none";
        document.getElementById("motivo").value = "";
    }
});
</script>
{% endblock %}
